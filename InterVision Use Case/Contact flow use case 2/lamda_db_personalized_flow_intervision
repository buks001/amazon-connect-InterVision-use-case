{"Version":"2019-10-30","StartAction":"ebd339f6-200a-4fe8-a908-1c28065f0fc7","Metadata":{"entryPointPosition":{"x":32,"y":4},"ActionMetadata":{"ebd339f6-200a-4fe8-a908-1c28065f0fc7":{"position":{"x":32,"y":140.8}},"61ab10b4-68f4-44be-8d14-e79f0065494a":{"position":{"x":32,"y":310.4},"overrideConsoleVoice":false},"70538fa0-484a-46ed-81c9-a824db174604":{"position":{"x":31.2,"y":480.8}},"97899112-7fca-4583-9757-6368b1760472":{"position":{"x":30.4,"y":650.4},"parameters":{"LambdaFunctionARN":{"displayName":"dbDemo"}},"dynamicMetadata":{}},"9b39ed66-4008-4891-b646-bc62acbaf22a":{"position":{"x":284,"y":57.6},"conditions":[],"conditionMetadata":[{"id":"04cc18b2-a569-4a9b-a849-ba1be64c6564","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"true"},{"id":"277dc05f-c120-4382-9ca3-71f8467b9d34","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"false"}]},"4dae28e7-3ff9-4a5b-9f20-7523158d8208":{"position":{"x":509.6,"y":308}},"8dcdf65d-5dd2-4306-9706-b3dbc18fbf5c":{"position":{"x":282.4,"y":308}},"5764f7c7-2d3b-4e20-b5f0-449a7e30d1f0":{"position":{"x":730.4,"y":308.8}},"4babe0ff-c3c7-4386-88b6-45835f2c29c3":{"position":{"x":302.4,"y":518.4},"conditions":[],"conditionMetadata":[{"id":"187aba9f-ff0d-496e-b0bd-4646cf49967a","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"true"},{"id":"f70d8b00-e149-4467-9159-20f02906060e","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"false"}]},"968c3934-31e0-455b-8532-b25d0d5f6296":{"position":{"x":1039.2,"y":561.6},"dynamicParams":[]},"61b7e8e0-ce29-4598-a764-e2ac8ec5a19b":{"position":{"x":560.8,"y":706.4}},"3224c680-ea74-4e33-945a-5fb520177f4e":{"position":{"x":556,"y":512}},"0cbd4659-3b49-4953-bc17-05cc557168d4":{"position":{"x":1332,"y":396.8}},"cfc9ce64-a46b-4221-89c1-932ab2f1da51":{"position":{"x":856,"y":700.8}},"6f4eacdd-90b3-4569-bd43-7d52556a2135":{"position":{"x":862.4,"y":888},"parameters":{"QueueId":{"displayName":"consultant support"}},"queue":{"text":"consultant support"}}},"Annotations":[],"name":"lamda_db_personalized_flow_intervision","description":"","type":"contactFlow","status":"published","hash":{}},"Actions":[{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"ebd339f6-200a-4fe8-a908-1c28065f0fc7","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"61ab10b4-68f4-44be-8d14-e79f0065494a"}},{"Parameters":{"TextToSpeechVoice":"Matthew"},"Identifier":"61ab10b4-68f4-44be-8d14-e79f0065494a","Type":"UpdateContactTextToSpeechVoice","Transitions":{"NextAction":"70538fa0-484a-46ed-81c9-a824db174604"}},{"Parameters":{"RecordingBehavior":{"RecordedParticipants":["Agent","Customer"]}},"Identifier":"70538fa0-484a-46ed-81c9-a824db174604","Type":"UpdateContactRecordingBehavior","Transitions":{"NextAction":"97899112-7fca-4583-9757-6368b1760472"}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:541702010993:function:dbDemo","InvocationTimeLimitSeconds":"8","ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"97899112-7fca-4583-9757-6368b1760472","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"9b39ed66-4008-4891-b646-bc62acbaf22a","Errors":[{"NextAction":"8dcdf65d-5dd2-4306-9706-b3dbc18fbf5c","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.External.phoneNumberFound"},"Identifier":"9b39ed66-4008-4891-b646-bc62acbaf22a","Type":"Compare","Transitions":{"NextAction":"8dcdf65d-5dd2-4306-9706-b3dbc18fbf5c","Conditions":[{"NextAction":"5764f7c7-2d3b-4e20-b5f0-449a7e30d1f0","Condition":{"Operator":"Equals","Operands":["true"]}},{"NextAction":"4dae28e7-3ff9-4a5b-9f20-7523158d8208","Condition":{"Operator":"Equals","Operands":["false"]}}],"Errors":[{"NextAction":"8dcdf65d-5dd2-4306-9706-b3dbc18fbf5c","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Text":"I couldn't find your phone number in our records, I've added it to our database for future reference."},"Identifier":"4dae28e7-3ff9-4a5b-9f20-7523158d8208","Type":"MessageParticipant","Transitions":{"NextAction":"4babe0ff-c3c7-4386-88b6-45835f2c29c3"}},{"Parameters":{"Text":"Looks like Lambda ran in to an error, let's continue anyways."},"Identifier":"8dcdf65d-5dd2-4306-9706-b3dbc18fbf5c","Type":"MessageParticipant","Transitions":{"NextAction":"4babe0ff-c3c7-4386-88b6-45835f2c29c3"}},{"Parameters":{"Text":"Hi $.External.firstName $.External.lastName!"},"Identifier":"5764f7c7-2d3b-4e20-b5f0-449a7e30d1f0","Type":"MessageParticipant","Transitions":{"NextAction":"4babe0ff-c3c7-4386-88b6-45835f2c29c3"}},{"Parameters":{"ComparisonValue":"$.External.firstCall"},"Identifier":"4babe0ff-c3c7-4386-88b6-45835f2c29c3","Type":"Compare","Transitions":{"NextAction":"968c3934-31e0-455b-8532-b25d0d5f6296","Conditions":[{"NextAction":"3224c680-ea74-4e33-945a-5fb520177f4e","Condition":{"Operator":"Equals","Operands":["true"]}},{"NextAction":"61b7e8e0-ce29-4598-a764-e2ac8ec5a19b","Condition":{"Operator":"Equals","Operands":["false"]}}],"Errors":[{"NextAction":"968c3934-31e0-455b-8532-b25d0d5f6296","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Attributes":{"screenpopUrl":"http://www.whitepages.com/phone/$.CustomerEndpoint.Address","DNIS":"$.SystemEndpoint.Address","firstName":"$.External.firstName","lastName":"$.External.lastName"},"TargetContact":"Current"},"Identifier":"968c3934-31e0-455b-8532-b25d0d5f6296","Type":"UpdateContactAttributes","Transitions":{"NextAction":"0cbd4659-3b49-4953-bc17-05cc557168d4","Errors":[{"NextAction":"0cbd4659-3b49-4953-bc17-05cc557168d4","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Welcome back! The last time you called was $.External.lastCalledDate\nThank you for calling again, an agent will be connected to you shortly."},"Identifier":"61b7e8e0-ce29-4598-a764-e2ac8ec5a19b","Type":"MessageParticipant","Transitions":{"NextAction":"6f4eacdd-90b3-4569-bd43-7d52556a2135","Errors":[{"NextAction":"0cbd4659-3b49-4953-bc17-05cc557168d4","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Looks like this is your first time calling!\nWe are happy to have you here, an agent will be connected to you shortly."},"Identifier":"3224c680-ea74-4e33-945a-5fb520177f4e","Type":"MessageParticipant","Transitions":{"NextAction":"6f4eacdd-90b3-4569-bd43-7d52556a2135","Errors":[{"NextAction":"0cbd4659-3b49-4953-bc17-05cc557168d4","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"0cbd4659-3b49-4953-bc17-05cc557168d4","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{},"Identifier":"cfc9ce64-a46b-4221-89c1-932ab2f1da51","Type":"TransferContactToQueue","Transitions":{"NextAction":"0cbd4659-3b49-4953-bc17-05cc557168d4","Errors":[{"NextAction":"0cbd4659-3b49-4953-bc17-05cc557168d4","ErrorType":"QueueAtCapacity"},{"NextAction":"0cbd4659-3b49-4953-bc17-05cc557168d4","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueueId":"arn:aws:connect:us-east-1:541702010993:instance/77a79d98-8291-4e7d-945b-06b166c07ae1/queue/6bc8f445-e7be-4881-97bb-72cbca8d0c13"},"Identifier":"6f4eacdd-90b3-4569-bd43-7d52556a2135","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"cfc9ce64-a46b-4221-89c1-932ab2f1da51","Errors":[{"NextAction":"0cbd4659-3b49-4953-bc17-05cc557168d4","ErrorType":"NoMatchingError"}]}}]}